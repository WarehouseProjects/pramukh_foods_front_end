(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{cz6n:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return f}));var i=r("CcnG"),n=r("26FU");r("6blF");class s{}class a{constructor(t=1024){this.buffer=new Uint8Array(t),this.size=0}clear(){this.size=0}flush(){const t=new Uint8Array(this.buffer.slice(0,this.size));return this.size=0,t}write(t){return this.resize(t.length),this.buffer.set(t,this.size),this.size+=t.length,this}writeUInt8(t){return this.resize(1),this.buffer[this.size++]=255&t,this}resize(t){const e=this.buffer.length-this.size;if(e<t){const r=this.buffer,i=Math.ceil((t-e)/r.length)+1;this.buffer=new Uint8Array(r.length*i),this.buffer.set(r,0)}}}class u extends s{constructor(){super(),this.encoder=new TextEncoder}init(){return this.buffer=new a,this.write(27),this.write("@"),this}flush(){return this.buffer.flush()}feed(t=1){return this.write(27),this.write("a"),this.write(t),this}cut(t="full"){return this.write(27),this.write("d"),this.write("full"===t?2:3),this}writeLine(t){return this.write(t+"\n")}setInverse(t=!0){return this.write(27),this.write(t?"4":"5"),this}setUnderline(t=!0){return this.write(27),this.write("-"),this.write(t?1:0),this}setJustification(t){let e;switch(t){case"center":e=1;break;case"right":e=2;break;default:e=0}return this.write(27),this.write(29),this.write("a"),this.write(e),this}setBold(t=!0){return this.write(27),this.write(t?"E":"F"),this}setSize(t){return this.write(27),this.write("i"),this.write("normal"===t?0:1),this.write("normal"===t?0:1),this}write(t){return"number"==typeof t?this.buffer.writeUInt8(t):this.buffer.write("string"==typeof t?this.encoder.encode(t):t),this}}var o=function(){};o.prototype.createAlignmentElement=function(t){var e="<alignment";return null!=t&&(e+=this._analysisEnumAttribute("position",t.position,/^(left|center|right)$/)),e+"/>"},o.prototype.createBarcodeElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(e="<barcode"+this._analysisEnumAttribute("symbology",t.symbology,/^(UPCE|UPCA|JAN8|JAN13|Code39|ITF|Code128|Code93|NW7)$/),e+=this._analysisEnumAttribute("width",t.width,/^(width[2-4]|width_mode[1-9])$/),e+=this._analysisEnumAttribute("hri",t.hri,/^(false|true)$/),e+=this._analysisValueAttribute("height",t.height,1,255),null==t.data)throw Error('Argument "data" is undefined.');return(e=e+">"+this._encodeEscapeSequenceBinary(t.data))+"</barcode>"},o.prototype.createBitImageElement=function(t){var e="<bitimage";if(null==t)throw Error("Argument is undefined.");var r=0,i=0,n=0,s=0;if(null!=t.x&&(r=t.x),null!=t.y&&(i=t.y),null!=t.width&&(n=t.width),null!=t.height&&(s=t.height),this._analysisValueAttribute("x",r,0,65535),this._analysisValueAttribute("y",i,0,65535),e+=this._analysisValueAttribute("width",n,0,65535),e+=this._analysisValueAttribute("height",s,0,65535),null==t.context)throw Error('Argument "context" is undefined.');return(e=e+">"+this._encodeRasterImage(t.context.getImageData(r,i,n,s).data,n,s))+"</bitimage>"},o.prototype.createCutPaperElement=function(t){var e="<cutpaper";return null!=t&&(e+=this._analysisEnumAttribute("feed",t.feed,/^(false|true)$/),e+=this._analysisEnumAttribute("type",t.type,/^(full|partial)$/)),e+"/>"},o.prototype.createFeedElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(null==t.line&&null==t.unit)throw Error('Argument "line / unit" is undefined.');return e="<feed"+this._analysisValueAttribute("line",t.line,1,255),(e+=this._analysisValueAttribute("unit",t.unit,1,255))+"/>"},o.prototype.createInitializationElement=function(t){var e="<initialization";return null!=t&&(e+=this._analysisEnumAttribute("reset",t.reset,/^(false|true)$/),e+=this._analysisEnumAttribute("print",t.print,/^(false|true)$/)),e+"/>"},o.prototype.createLogoElement=function(t){var e="<logo";return null!=t&&(e+=this._analysisEnumAttribute("width",t.width,/^(single|double)$/),e+=this._analysisEnumAttribute("height",t.height,/^(single|double)$/),e+=this._analysisValueAttribute("number",t.number,1,255)),e+"/>"},o.prototype.createPdf417Element=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(e="<pdf417"+this._analysisEnumAttribute("level",t.level,/^(level[0-8])$/),null!=t.line&&(e=0!=t.line?e+this._analysisValueAttribute("line",t.line,3,90):e+' line="0"'),e+=this._analysisValueAttribute("column",t.column,0,30),e+=this._analysisValueAttribute("module",t.module,1,8),e+=this._analysisValueAttribute("aspect",t.aspect,1,8),null==t.data)throw Error('Argument "data" is undefined.');return(e=e+">"+this._encodeEscapeSequenceBinary(t.data))+"</pdf417>"},o.prototype.createPeripheralElement=function(t){var e="<peripheral";return null!=t&&(e+=this._analysisValueAttribute("channel",t.channel,1,2),e+=this._analysisValueAttribute("on",t.on,1,65535),e+=this._analysisValueAttribute("off",t.off,1,65535)),e+"/>"},o.prototype.createQrCodeElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(e="<qrcode"+this._analysisEnumAttribute("model",t.model,/^(model[12])$/),e+=this._analysisEnumAttribute("level",t.level,/^(level_[lmqh])$/),e+=this._analysisValueAttribute("cell",t.cell,1,8),null==t.data)throw Error('Argument "data" is undefined.');return(e=e+">"+this._encodeEscapeSequenceBinary(t.data))+"</qrcode>"},o.prototype.createRawDataElement=function(t){if(null==t)throw Error("Argument is undefined.");if(null==t.data)throw Error('Argument "data" is undefined.');return(t="<rawdata>"+this._encodeBase64Binary(t.data))+"</rawdata>"},o.prototype.createRuledLineElement=function(t){var e="<ruledline";return null!=t&&(e+=this._analysisEnumAttribute("thickness",t.thickness,/^(thin|medium|thick|double_(thin|medium|thick))$/),e+=this._analysisValueAttribute("width",t.width,1,65535)),e+"/>"},o.prototype.createSoundElement=function(t){var e="<sound";return null!=t&&(e+=this._analysisValueAttribute("channel",t.channel,1,2),e+=this._analysisValueAttribute("repeat",t.repeat,1,20)),e+"/>"},o.prototype.createTextElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");return e="<text"+this._analysisEnumAttribute("emphasis",t.emphasis,/^(false|true)$/),e+=this._analysisEnumAttribute("invert",t.invert,/^(false|true)$/),e+=this._analysisEnumAttribute("linespace",t.linespace,/^(24|32)$/),e+=this._analysisEnumAttribute("font",t.font,/^(font_[ab])$/),e+=this._analysisEnumAttribute("underline",t.underline,/^(false|true)$/),e+=this._analysisValueAttribute("characterspace",t.characterspace,0,7),e+=this._analysisValueAttribute("width",t.width,1,6),e+=this._analysisValueAttribute("height",t.height,1,6),e+=this._analysisEnumAttribute("codepage",t.codepage,/^(cp(437|737|772|774|851|852|855|857|858|860|861|862|863|864|865|866|869|874|928|932|998|999|1001|1250|1251|1252|2001|3001|3002|3011|3012|3021|3041|3840|3841|3843|3844|3845|3846|3847|3848)|utf8|blank|utf8|shift_jis|gb18030|gb2312|big5|korea)$/),e+=this._analysisEnumAttribute("international",t.international,/^(usa|france|germany|uk|denmark|sweden|italy|spain|japan|norway|denmark2|spain2|latin_america|korea|ireland|legal)$/),null!=t.data?(e+=">",e=1==t.binary?e+this._encodeEscapeSequenceBinary(t.data):e+this._encodeEscapeSequence(t.data),e+="</text>"):e+="/>",e},o.prototype.createHoldPrintElement=function(t){var e="<holdprint";return null!=t&&(e+=this._analysisEnumAttribute("type",t.type,/^(valid|invalid|default)$/)),e+"/>"},o.prototype._analysisEnumAttribute=function(t,e,r){if(null!=e){if(!r.test(e))throw Error('Argument "'+t+'" is invalid.');return" "+t+'="'+e+'"'}return""},o.prototype._analysisValueAttribute=function(t,e,r,i){if(null!=e){if(e<r||e>i)throw Error('Argument "'+t+'" is invalid.');return" "+t+'="'+e+'"'}return""},o.prototype._encodeEscapeSequence=function(t){var e=/[\\\x00-\x20\x26\x3c\x3e\x7f]/g;return e.test(t)&&(t=t.replace(e,(function(t){return"\\"==t?"\\\\":"\\x"+("0"+t.charCodeAt(0).toString(16)).slice(-2)}))),t},o.prototype._encodeEscapeSequenceBinary=function(t){var e=/[\\\x00-\x20\x26\x3c\x3e\x7f-\xff]/g;return e.test(t)&&(t=t.replace(e,(function(t){return"\\"==t?"\\\\":"\\x"+("0"+t.charCodeAt(0).toString(16)).slice(-2)}))),t},o.prototype._encodeBase64Binary=function(t){var e="",r=t.length;t+="\0\0";for(var i=0;i<r;i+=3){var n=t.charCodeAt(i)<<16|t.charCodeAt(i+1)<<8|t.charCodeAt(i+2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&n)}switch(r%3){case 1:return e.slice(0,-2)+"==";case 2:return e.slice(0,-1)+"="}return e},o.prototype._encodeRasterImage=function(t,e,r){for(var i=[[-254,-126,-222,-94,-246,-118,-214,-86],[-62,-190,-30,-158,-54,-182,-22,-150],[-206,-78,-238,-110,-198,-70,-230,-102],[-14,-142,-46,-174,-6,-134,-38,-166],[-242,-114,-210,-82,-250,-122,-218,-90],[-50,-178,-18,-146,-58,-186,-26,-154],[-194,-66,-226,-98,-202,-74,-234,-106],[-2,-130,-34,-162,-10,-138,-42,-170]],n="",s=0,a=0;a<r;a++){for(var u=0,o=128,l=0;l<e;l++)((30*t[s]+59*t[s+1]+11*t[s+2])*t[s+3]+12800)/25500-t[s+3]<i[7&a][7&l]&&(u|=o),s+=4,0==(o>>=1)&&(n+=String.fromCharCode(u),u=0,o=128);128!=o&&(n+=String.fromCharCode(u))}for(t=n,n="",e=t.length,t+="\0\0",a=0;a<e;a+=3)r=t.charCodeAt(a)<<16|t.charCodeAt(a+1)<<8|t.charCodeAt(a+2),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&r);switch(e%3){case 1:return n.slice(0,-2)+"==";case 2:return n.slice(0,-1)+"="}return n};class l extends s{constructor(){super(),this.builder=new o}init(){return this.request+=this.builder.createInitializationElement(),this}setJustification(t="left"){return this.request+=this.builder.createAlignmentElement({position:t}),this}setBold(t=!0){return this.request+=this.builder.createTextElement({emphasis:t}),this}setUnderline(t=!0){return this.request+=this.builder.createTextElement({underline:t}),this}setInverse(t=!0){return this.request+=this.builder.createTextElement({invert:t}),this}writeLine(t){return this.request+=this.builder.createTextElement({data:t+"\n"}),this}setSize(t="normal"){let e;switch(t){case"large":e=2;break;default:e=1}return this.request+=this.builder.createTextElement({width:e,height:e}),this}cut(t="full"){return this.request+=this.builder.createCutPaperElement({feed:!0,type:t}),this}feed(t=1){return this.request+=this.builder.createFeedElement({line:t}),this}flush(){return this.request}}class h extends s{constructor(){super(),this.encoder=new TextEncoder}init(){return this.buffer=new a,this.write(27),this.write("@"),this}flush(){return this.buffer.flush()}feed(t=1){return this.write(27),this.write("d"),this.write(t),this}cut(t="full"){return this.write(29),this.write("V"),this.write("full"===t?1:0),this}writeLine(t){return this.write(t+"\n")}setInverse(t=!0){return this.write(29),this.write("B"),this.write(t?1:0),this}setUnderline(t=!0){return this.write(27),this.write("-"),this.write(t?1:0),this}setJustification(t="left"){let e;switch(t){case"center":e=1;break;case"right":e=2;break;default:e=0}return this.write(27),this.write("a"),this.write(e),this}setBold(t=!0){return this.write(27),this.write("E"),this.write(t?1:0),this}setSize(t="normal"){return this.write(27),this.write("!"),this.write("normal"===t?0:48),this}write(t){return"number"==typeof t?this.buffer.writeUInt8(t):this.buffer.write("string"==typeof t?this.encoder.encode(t):t),this}}let c=(()=>{class t extends s{constructor(){super(),this.isConnected=new n.a(!1)}setDriver(t,e="ESC/POS"){return this.driver=t,this.printLanguage=e,this.driver.connect(),this.driver.isConnected.subscribe(t=>{this.isConnected.next(t)}),this}init(){if(!this.driver)throw"Cannot initiate the print service.  No connection detected.";switch(this.printLanguage){case"WebPRNT":this.builder=new l;break;case"StarPRNT":this.builder=new u;break;default:this.builder=new h}return this.builder.init(),this}cut(t="full"){return this.builder.cut(t),this}feed(t=1){return this.builder.feed(t),this}setInverse(t=!0){return this.builder.setInverse(t),this}setBold(t=!0){return this.builder.setBold(t),this}setUnderline(t=!0){return this.builder.setUnderline(t),this}setJustification(t="left"){return this.builder.setJustification(t),this}setSize(t="normal"){return this.builder.setSize(t),this}writeLine(t=""){return this.builder.writeLine(t),this}flush(){this.driver.write(this.builder.flush())}}return t.\u0275prov=Object(i.Zb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();var d=function(t){this.papertype=this.checkedblock=this.url=null,this.timeout=9e4,this.onTimeout=this.onError=this.onReceive=null,this.holdprint_timeout=void 0,this._json=this._url=null,null!=t&&(null!=t.url&&(this.url=t.url),null!=t.checkedblock&&(this.checkedblock=t.checkedblock),null!=t.papertype&&(this.papertype=t.papertype),null!=t.timeout&&(this.timeout=t.timeout),null!=t.holdprint_timeout&&(this.holdprint_timeout=t.holdprint_timeout))},p={};d.prototype._callMessageHandler=function(){var t=this;null==p[t._url]?(p[t._url]=t,webkit.messageHandlers.sendMessageHandler.postMessage(t._json)):setTimeout((function(){t._callMessageHandler()}),500)},d.prototype.sendMessage=function(t){var e,r="<root";if(null!=t.checkedblock?0==t.checkedblock&&(r+=' checkedblock="false"'):0==this.checkedblock&&(r+=' checkedblock="false"'),null!=t.papertype?"normal"==t.papertype?r+=' papertype="normal"':"black_mark"==t.papertype?r+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==t.papertype&&(r+=' papertype="black_mark_and_detect_at_power_on"'):"normal"==this.papertype?r+=' papertype="normal"':"black_mark"==this.papertype?r+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==this.papertype&&(r+=' papertype="black_mark_and_detect_at_power_on"'),null!=t.holdprint_timeout?r+=' holdprint_timeout="'+t.holdprint_timeout+'"':null!=this.holdprint_timeout&&(r+=' holdprint_timeout="'+this.holdprint_timeout+'"'),e='<StarWebPrint xmlns="http://www.star-m.jp" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Request>',e+=this._encodeEscapeSequence(r=r+">"+t.request+"</root>"),e+="</Request>",e+="</StarWebPrint>",r="",/^https?:\/\/(localhost|127\.0\.0\.1):8001\//.test((r=null!=t.url?t.url:this.url).toLowerCase())&&-1!=navigator.userAgent.indexOf("webPRNTSupportMessageHandler"))this._json=JSON.stringify({url:r,body:e}),this._url=r,this._callMessageHandler();else{var i=null;if(window.XMLHttpRequest)i=new XMLHttpRequest;else{if(!window.ActiveXObject)return void(this.onError&&this.onError({status:10001,responseText:"XMLHttpRequest is not supported."}));i=new ActiveXObject("Microsoft.XMLHTTP")}-1==navigator.userAgent.indexOf("iPad;")&&-1==navigator.userAgent.indexOf("iPhone;")&&-1==navigator.userAgent.indexOf("iPod touch;")&&-1==navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("WebPRNTSupportHTTPS")||0!=r.toLowerCase().indexOf("https://localhost")&&0!=r.toLowerCase().indexOf("https://127.0.0.1")||(r="http://"+r.substring(8));try{i.open("POST",r,!0)}catch(s){return void(this.onError&&this.onError({status:10002,responseText:s.message}))}try{null!=t.timeout?i.timeout=t.timeout:this.timeout&&(i.timeout=this.timeout)}catch(a){}i.setRequestHeader("Content-Type","text/xml; charset=UTF-8");var n=this;i.onreadystatechange=function(){if(4==i.readyState)try{if(200==i.status){var t=i.responseXML.getElementsByTagName("Response");if(0<t.length){if(n.onReceive){var r=t[0].childNodes[0].nodeValue;n.onReceive({traderSuccess:r.slice(r.indexOf("<success>")+9,r.indexOf("</success>")),traderCode:r.slice(r.indexOf("<code>")+6,r.indexOf("</code>")),traderStatus:r.slice(r.indexOf("<status>")+8,r.indexOf("</status>")),status:i.status,responseText:i.responseText})}}else n.onError&&n.onError({status:i.status,responseText:i.responseText})}else n.onError&&n.onError({status:i.status,responseText:i.responseText})}catch(e){n.onError&&n.onError({status:0,responseText:"Connection timeout occurred."})}};try{i.ontimeout=function(){n.onTimeout&&n.onTimeout()}}catch(u){}try{i.send(e)}catch(o){this.onError&&this.onError({status:10003,responseText:o.message})}}},d.prototype._onHandlerSuccess=function(t){trader.onReceive&&trader.onReceive(t)},d.prototype._onHandlerError=function(t){trader.onError&&trader.onError(t)},d.prototype.isCoverOpen=function(t){return!!(32&parseInt(t.traderStatus.substr(4,2),16))},d.prototype.isOffLine=function(t){return!!(8&parseInt(t.traderStatus.substr(4,2),16))},d.prototype.isCompulsionSwitchClose=function(t){return!!(4&parseInt(t.traderStatus.substr(4,2),16))},d.prototype.isEtbCommandExecute=function(t){return!!(2&parseInt(t.traderStatus.substr(4,2),16))},d.prototype.isHighTemperatureStop=function(t){return!!(64&parseInt(t.traderStatus.substr(6,2),16))},d.prototype.isNonRecoverableError=function(t){return!!(32&parseInt(t.traderStatus.substr(6,2),16))},d.prototype.isAutoCutterError=function(t){return!!(8&parseInt(t.traderStatus.substr(6,2),16))},d.prototype.isBlackMarkError=function(t){return!!(8&parseInt(t.traderStatus.substr(8,2),16))},d.prototype.isPaperEnd=function(t){return!!(8&parseInt(t.traderStatus.substr(10,2),16))},d.prototype.isPaperNearEnd=function(t){return!!(4&parseInt(t.traderStatus.substr(10,2),16))},d.prototype.isPaperPresent=function(t){return!!(2&parseInt(t.traderStatus.substr(12,2),16))},d.prototype.extractionEtbCounter=function(t){var e=0;return 64&parseInt(t.traderStatus.substr(14,2),16)&&(e|=16),32&parseInt(t.traderStatus.substr(14,2),16)&&(e|=8),8&parseInt(t.traderStatus.substr(14,2),16)&&(e|=4),4&parseInt(t.traderStatus.substr(14,2),16)&&(e|=2),2&parseInt(t.traderStatus.substr(14,2),16)&&(e|=1),e},d.prototype._encodeEscapeSequence=function(t){var e=/[<>&]/g;return e.test(t)&&(t=t.replace(e,(function(t){switch(t){case"<":return"&lt;";case">":return"&gt;"}return"&amp;"}))),t};class f{}}}]);